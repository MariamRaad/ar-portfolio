<!DOCTYPE html>
<html>
    <head>
        <title>AR Portfolio - Mariam Raad</title>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, user-scalable=yes, minimum-scale=1.0, maximum-scale=2.0">
        
        <!-- AFrame -->
        <!-- <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script> -->
        <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@cd01cec35a01e03eb2d6a9272500a53de31d3828/dist/aframe-master.min.js"></script>
        
        <!-- ARjs -->
        <!-- Version without NFT/image tracking but with marker + location based support -->
        <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script> -->
        <script src="https://raw.githack.com/AR-js-org/AR.js/3.1.0/aframe/build/aframe-ar.js"></script>
        
        <!-- Other Dependencies -->
        <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
        <!-- import the webpage's stylesheet -->
        <link rel="stylesheet" href="/style.css">
        
        <!-- import Scripts to add functionality -->
        <script src="/events.js"></script>
        <script src="/cursor.js" defer></script> <!--the defer attribute tells the browser that the script is meant to be executed after the document has been parsed --> 
        
        <script>
        window.onload = function() {
            AFRAME.registerComponent('videohandler', {
                init: function () {
                    var marker = this.el;

                    this.vid = document.querySelector("#vid");

                    marker.addEventListener('markerFound', function () {
                        this.vid.play();
                    }.bind(this));
    
		    marker.addEventListener('markerLost', function() {
		    	this.vid.pause();
			this.vid.currentTime = 0;
		    }.bind(this));
                }
            });
        };
        </script>
	 <!--   
	<script>
            window.addEventListener('click', function () {
                var video = document.querySelector('#vid');
                if (video.paused == true) {
                    video.play();
                } else {
                    video.pause();
                }
            }, false);
        </script>    
    -->
    </head>
    
    <body style="margin : 0px; overflow: hidden;">
        <!-- <div class="topleft">Top Left</div> -->
        
        <a-scene 
            vr-mode-ui="enabled: false;"
            renderer="antialias: true; alpha: true; precision: mediump;"
            embedded arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        >
            <a-assets>
                <!-- <img id="my-image" src="https://mariamraad.github.io/ar-portfolio/assets/images/batman.jpg"> <!-- assets/images/batman.jpg -->
                <!-- <video id="safenetkids" autoplay loop="true" playsinline="true" src="/assets/videos/SafeNetKids.mp4"></video> -->
                <!-- "https://mariamraad.github.io/ar-portfolio/assets/videos/SafeNetKids-komp.mp4" -->
                <video  
                       src="https://mariamraad.github.io/ar-portfolio/assets/videos/SafeNetKids-komp1.mp4" 
                       preload="auto" 
                       id="vid"
                       response-type="arraybuffer"
                       loop
                       crossorigin
                       webkit-playsinline
                       autoplay
                       playsinline
                 ></video>
            </a-assets>
            
            <!-- <a-marker-camera preset='hiro'> -->
            <!-- <a-marker-camera preset='custom' type='pattern' url='https://mariamraad.github.io/ar-portfolio/assets/images/markers/pattern-Logo_M.patt' smooth='true' smoothCount='10' smoothTolerance='0.02' smoothThreshold='2' registerevents>
            -->            
            <a-marker videohandler click id="marker" preset='custom' type='pattern' url='https://mariamraad.github.io/ar-portfolio/assets/images/markers/orange.patt' smooth='true' smoothCount='10' smoothTolerance='0.02' smoothThreshold='2' registerevents>
                 <a-video src="#vid" position="0 0.5 0" rotation="270 0 0" width="2" height="1.5" play="true"></a-video> 
                 <!-- <a-image position="0 2 0" rotation ="0 0 0" width="2" height="1" src="#my-image"></a-image> -->
            </a-marker>
            <a-entity camera></a-entity>
            
        </a-scene>
        
        <!-- Video Click Function Testing
        <script>
            window.addEventListener('click', function () {
                var video = document.querySelector('#vid');
                if (video.paused == true) {
                    video.play();
                } else {
                    video.pause();
                }
            }, false);
        </script>
        -->
        
    </body>
</html>
